package project.thread.test;

/**
 *
 * ä¾‹å­ï¼šåˆ›å»ºä¸‰ä¸ªçª—å£ä¹°ç¥¨ï¼Œæ€»ç¥¨æ•°ä¸º100å¼ ï¼Œä½¿ç”¨å®ç°Runnableæ¥å£çš„æ–¹å¼
 * å­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œå¾…è§£å†³
 *
 * 1.é—®é¢˜ï¼šä¹°ç¥¨è¿‡ç¨‹ä¸­ï¼Œå‡ºç°äº†é‡ç¥¨ã€é”™ç¥¨ --> å‡ºç°äº†çº¿ç¨‹å®‰å…¨é—®é¢˜
 * 2.é—®é¢˜å‡ºç°çš„åŸå› ï¼šå½“æŸä¸ªçº¿ç¨‹æ“ä½œè½¦ç¥¨çš„è¿‡ç¨‹ä¸­ï¼Œå°šæœªæ“ä½œå®Œæˆæ—¶ï¼Œå…¶ä»–çº¿ç¨‹å‚ä¸è¿›æ¥ï¼Œ
 *                 ä¹Ÿæ¥æ“ä½œè½¦ç¥¨ã€‚
 * 3.å¦‚ä½•è§£å†³ï¼šå½“ä¸€ä¸ªçº¿ç¨‹aåœ¨æ“ä½œticket(å…±äº«æ•°æ®)çš„æ—¶å€™ï¼Œå…¶ä»–çº¿ç¨‹ä¸èƒ½å‚ä¸è¿›æ¥ã€‚
 *            ç›´åˆ°çº¿ç¨‹aæ“ä½œå®Œticket(å…±äº«æ•°æ®)æ—¶ï¼Œå…¶ä»–çº¿ç¨‹æ‰å¯ä»¥å¼€å§‹æ“ä½œ
 *            ticket(å…±äº«æ•°æ®)ã€‚è¿™ç§æƒ…å†µå³ä½¿çº¿ç¨‹aå‡ºç°äº†é˜»å¡ä¹Ÿä¸èƒ½è¢«æ”¹å˜
 * 4.åœ¨Javaä¸­ï¼Œæˆ‘ä»¬é€šè¿‡åŒæ­¥æœºåˆ¶ï¼Œæ¥è§£å†³çº¿ç¨‹çš„å®‰å…¨é—®é¢˜ã€‚
 *
 * æ–¹å¼ä¸€ï¼šåŒæ­¥ä»£ç å—
 *
 *        synchronized(åŒæ­¥ç›‘è§†å™¨){
 *            //éœ€è¦è¢«åŒæ­¥çš„ä»£ç 
 *        }
 *        è¯´æ˜ï¼š1.æ“ä½œå…±äº«æ•°æ®çš„ä»£ç ï¼Œå³ä¸ºéœ€è¦è¢«åŒæ­¥çš„ä»£ç 
 *             2.å…±äº«æ•°æ®ï¼šå¤šä¸ªçº¿ç¨‹å…±åŒæ“ä½œçš„å˜é‡ã€‚æ¯”å¦‚ï¼šticketå°±æ˜¯å…±äº«æ•°æ®
 *             3.åŒæ­¥ç›‘è§†å™¨ï¼›ä¿—ç§°ï¼šé”ã€‚ä»»ä½•ä¸€ä¸ªç±»çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥å……å½“é”
 *               *ğŸ”º*è¦æ±‚ï¼šå¤šä¸ªçº¿ç¨‹å¿…é¡»è¦å…±ç”¨åŒä¸€æŠŠé”*ğŸ”º*
 *
 *             è¡¥å……ï¼šåœ¨å®ç°Runnableæ¥å£åˆ›å»ºå¤šçº¿ç¨‹çš„æ–¹å¼ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘ä½¿ç”¨
 *                  thiså……å½“åŒæ­¥ç›‘è§†å™¨
 *
 *
 * æ–¹å¼äºŒï¼šåŒæ­¥æ–¹æ³•
 *
 * 5.åŒæ­¥çš„æ–¹å¼ï¼Œè§£å†³äº†çº¿ç¨‹çš„å®‰å…¨é—®é¢˜ã€‚ --> åŒæ­¥çš„æ–¹å¼çš„å¥½å¤„
 *   æ“ä½œåŒæ­¥ä»£ç æ—¶ï¼Œåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹å‚ä¸ï¼Œå…¶ä»–çº¿ç¨‹ç­‰å¾…ã€‚ç›¸å½“äºæ˜¯ä¸€ä¸ªå•çº¿ç¨‹çš„è¿‡ç¨‹ï¼Œ
 *      æ•ˆç‡ä½ã€‚ â€”â€”â€”â€”>åŒæ­¥çš„æ–¹å¼çš„å±€é™æ€§
 *
 *
 * @author yuan_zhigang Eamil:3155799044@qq.com
 * @create 2019-11-19 15:30
 */

class WindowRunnable implements Runnable{

    private int ticket = 100;
    Object obj = new Object();

    @Override
    public void run() {

        while (true){
//            synchronized(obj) {
            synchronized(this){
                if (ticket > 0) {

                    try {
                        Thread.sleep(100);
                    } catch (InterruptedException e) {
                        e.printStackTrace();
                    }

                    System.out.println(Thread.currentThread().getName() + ":ä¹°ç¥¨ï¼Œç¥¨å·ä¸ºï¼š" + ticket);

                    ticket--;
                } else {
                    break;
                }
            }
        }
    }
}

public class WindowRunnableTest {
    public static void main(String[] args) {
        WindowRunnable w = new WindowRunnable();

        Thread t1 = new Thread(w);
        Thread t2 = new Thread(w);
        Thread t3 = new Thread(w);

        t1.setName("çª—å£1");
        t2.setName("çª—å£2");
        t3.setName("çª—å£3");

        t1.start();
        t2.start();
        t3.start();

    }
}
